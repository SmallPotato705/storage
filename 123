from gpiozero import InputDevice
import time

# 設定 GPIO 17 為輸入設備，並啟用下拉電阻
input_device = InputDevice(17, pull_up=False)

# 記錄 GPIO 的上一次狀態
last_state = input_device.value

# 定義一個回調函數，當 GPIO 從低電位變為高電位時觸發
def check_gpio_state():
    global last_state
    current_state = input_device.value
    print(f"當前狀態: {current_state}, 上一次狀態: {last_state}")
    if not last_state and current_state:
        print("GPIO 從低電位變為高電位!")
    last_state = current_state

print("等待 GPIO 變化...")

try:
    while True:
        check_gpio_state()
        time.sleep(0.1)  # 每 100 毫秒檢查一次狀態

except KeyboardInterrupt:
    print("程式結束")
